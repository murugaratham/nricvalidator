<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nric Validator</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-notify@0.5.4/dist/simple-notify.min.css" />
  </head>
  <body class="align">
    <a class="gh-ribbon red right" href="https://github.com/murugaratham/nricvalidator" target="_blank"
      >Fork me on GitHub!</a
    >
    <h3>Singapore Nric validator</h3>
    <form>
      <div class="form__field">
        <input type="text" class="form__input" maxlength="9" onkeyup="checknric(this)" required />
        <span class="icon"></span>
      </div>
    </form>
    <div>
      <button class="bootstrap-btn" onclick="generatenric()">Generate</button>
      <button class="bootstrap-btn" onclick="completenric()">Complete</button>
      <button class="bootstrap-btn" onclick="copynric()">Copy</button>
    </div>
    <p>
      *Hint* you can enter partial ids and let it complete the remaining characters for you, try M1234567 and click on
      complete
    </p>
  </body>
  <script src="../dist/js/nricvalidator.js"></script>
  <script>
    function copynric() {
      navigator.clipboard.writeText(document.querySelector("input").value);
      new Notify({
        status: "success",
        title: "Copied!",
        autoclose: true,
        autotimeout: 600,
        effect: "slide",
        position: "bottom right",
      });
    }
    function checknric(element) {
      var valid = nricvalidator.validate(element.value);
      if (valid) element.setCustomValidity("");
      else element.setCustomValidity("Invalid NRIC");
    }
    function generatenric() {
      document.querySelector("input").value = nricvalidator.generate();
      checknric(document.querySelector("input"));
    }
    function completenric() {
      try {
        if (document.querySelector("input").value.length === 9) {
          return;
        } else {
          var nric = nricvalidator.generate(document.querySelector("input").value);
          document.querySelector("input").value = nric;
          checknric(document.querySelector("input"));
        }
      } catch (err) {
        alert(err.message);
      }
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/simple-notify@0.5.4/dist/simple-notify.min.js"></script>
</html>
